<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Oil Consumption Visualization</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Main Content Area -->
        <div id="main-content">
            <!-- Country List -->
            <div id="country-list-container">
                <!-- Control Panel -->
                <div id="controls">
                    <h1>Global Gas Consumption</h1>
                    <div class="control-group">
                        <label for="indicator-select">Indicator:</label>
                        <select id="indicator-select">
                            <optgroup label="Oil Products">
                                <option value="total">Total Oil Consumption</option>
                                <option value="Motor gasoline">Motor Gasoline</option>
                                <option value="Gas/Diesel">Gas/Diesel</option>
                                <option value="Jet kerosene">Jet Kerosene</option>
                            </optgroup>
                            <optgroup label="Variables">
                                <option value="population">Population</option>
                                <option value="cars_per_pop">Cars/Population</option>
                                <option value="km_per_veh">Km/Vehicle</option>
                                <option value="gasoline_per_km">Gasoline/Km</option>
                                <option value="gasoline_total">Total Gasoline</option>
                            </optgroup>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="value-type-select">Value Type:</label>
                        <select id="value-type-select">
                            <option value="absolute">Absolute (TJ)</option>
                            <option value="indexed">Indexed</option>
                        </select>
                    </div>
                    <div class="control-group" id="base-year-control" style="display: none;">
                        <label for="base-year-slider">Base Year: <span id="base-year-value">2010</span></label>
                        <input type="range" id="base-year-slider" min="2000" max="2023" value="2010" step="1">
                    </div>
                    <div class="control-group">
                        <label for="year-slider">Year: <span id="year-value">2023</span></label>
                        <input type="range" id="year-slider" min="2000" max="2023" value="2023" step="1">
                    </div>
                </div>

                <div id="list-header">
                    <h2>OECD Countries</h2>
                    <div class="sort-controls">
                        <label>Sort by:</label>
                        <select id="sort-select">
                            <option value="name-asc">Name (A-Z)</option>
                            <option value="name-desc">Name (Z-A)</option>
                            <option value="value-desc" selected>Value (High to Low)</option>
                            <option value="value-asc">Value (Low to High)</option>
                        </select>
                    </div>
                </div>
                <div id="country-list"></div>
            </div>

            <!-- Detail Panel -->
            <div id="detail-panel" class="hidden">
                <button id="close-detail">&times;</button>
                <div id="detail-content">
                    <div class="detail-header">
                        <h2 id="country-name"></h2>
                        <div class="view-toggle">
                            <button class="toggle-btn active" data-view="raw">Raw Data</button>
                            <button class="toggle-btn" data-view="efficiency">Efficiency</button>
                            <button class="toggle-btn" data-view="forecast">Forecast</button>
                        </div>
                    </div>
                    <!-- Raw Data View Charts -->
                    <div id="charts-raw" class="charts-view">
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3>Raw Data Metrics</h3>
                                <select id="raw-data-mode-select" class="chart-mode-select">
                                    <option value="absolute">Absolute</option>
                                    <option value="indexed">Indexed</option>
                                </select>
                            </div>
                            <canvas id="raw-data-chart"></canvas>
                        </div>
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3>Derived Features</h3>
                            </div>
                            <canvas id="derived-features-chart"></canvas>
                        </div>
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3>Consumption by Product</h3>
                                <select id="oil-mode-select" class="chart-mode-select">
                                    <option value="absolute">Absolute</option>
                                    <option value="indexed">Indexed</option>
                                </select>
                            </div>
                            <canvas id="oil-products-chart"></canvas>
                        </div>
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3>Vehicle Fleet Electrification</h3>
                                <select id="ev-mode-select" class="chart-mode-select">
                                    <option value="absolute">Absolute</option>
                                    <option value="share">Share (%)</option>
                                </select>
                            </div>
                            <canvas id="ev-chart"></canvas>
                        </div>
                        <div class="chart-container" id="category-mix-container">
                            <div class="chart-header">
                                <h3>Vehicle Category Mix</h3>
                            </div>
                            <canvas id="category-mix-chart"></canvas>
                        </div>
                        <div class="chart-container" id="vehicle-type-mix-container">
                            <div class="chart-header">
                                <h3 id="vehicle-type-mix-title">Vehicle Type Mix</h3>
                            </div>
                            <canvas id="vehicle-type-mix-chart"></canvas>
                        </div>
                    </div>

                    <!-- Efficiency View Charts -->
                    <div id="charts-efficiency" class="charts-view hidden">
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3>Fuel Consumption Factors (vs 2010 Baseline)</h3>
                                <select id="ownership-metric-select" class="chart-mode-select">
                                    <option value="per_capita">Car Ownership: Per Capita</option>
                                    <option value="total">Car Ownership: Total Vehicles</option>
                                </select>
                            </div>
                            <canvas id="fuel-saved-chart"></canvas>
                        </div>
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3>Fleet Efficiency Over Time</h3>
                            </div>
                            <canvas id="efficiency-trends-chart"></canvas>
                        </div>
                    </div>

                    <!-- Forecast View Charts -->
                    <div id="charts-forecast" class="charts-view hidden">
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3>Forecasted Gasoline Demand</h3>
                                <select id="efficiency-scenario-select" class="chart-mode-select">
                                    <option value="improvement">Efficiency Improvement</option>
                                    <option value="age_out">Fleet Age Out (Constant)</option>
                                </select>
                            </div>
                            <canvas id="forecast-demand-chart"></canvas>
                        </div>
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3>Forecasted Fleet Efficiency</h3>
                            </div>
                            <canvas id="forecast-efficiency-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading Indicator -->
        <div id="loading">
            <div class="spinner"></div>
            <p>Loading data...</p>
        </div>
    </div>

    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Application Scripts -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
